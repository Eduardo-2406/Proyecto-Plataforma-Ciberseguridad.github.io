import{r as n,u as C,f as S,a as y,R as e,b as w,c as R,o as A}from"./index-BS11OSAT.js";import{e as L}from"./evaluations-2M7BGk-T.js";const $=()=>{const[d,E]=n.useState([]),[i,v]=n.useState({}),[p,m]=n.useState(!0),[u,N]=n.useState(""),{currentUser:r}=C(),{evaluationResults:x}=S(),l=y();n.useEffect(()=>{(async()=>{try{const t=Object.values(L);if(E(t),r){const s=w(R,`users/${r.uid}/evaluations`);A(s,c=>{if(c.exists()){const o=c.val();v(o)}})}m(!1)}catch(t){console.error("Error al cargar evaluaciones:",t),N("Error al cargar las evaluaciones"),m(!1)}})()},[r]);const g=a=>{if(!r)return"not-started";const t=i[a];return t?t.completed===!0&&t.score!==void 0?"completed":t.answers&&Object.keys(t.answers).length>0?"in-progress":"not-started":"not-started"},f=a=>{switch(a){case"completed":return"Completado";case"in-progress":return"En progreso";default:return"No iniciado"}},b=a=>{switch(a){case"completed":return"#16a34a";case"in-progress":return"#2563eb";default:return"#718096"}},h=a=>a>=80?"#16a34a":a>=60?"#2563eb":"#dc2626",k=a=>{if(!r){l("/login");return}l(`/evaluation/${a}`)};return p?e.createElement("div",{className:"evaluations-container"},e.createElement("div",{className:"loading"},"Cargando evaluaciones...")):u?e.createElement("div",{className:"evaluations-container"},e.createElement("div",{className:"error-message"},u)):e.createElement("div",{className:"evaluations-container"},e.createElement("h1",null,"Evaluaciones"),e.createElement("p",{className:"evaluations-description"},"Pon a prueba tus conocimientos con nuestras evaluaciones y obtén certificados de competencia."),e.createElement("div",{className:"evaluations-grid"},d.map(a=>{const t=g(a.id),s=i[a.id];return e.createElement("div",{key:a.id,className:"evaluation-card"},e.createElement("div",{className:"evaluation-header"},e.createElement("img",{src:a.image,alt:a.title,className:"evaluation-image"}),e.createElement("div",{className:"evaluation-badge"},e.createElement("i",{className:"fas fa-tasks"}))),e.createElement("div",{className:"evaluation-content"},e.createElement("h3",null,a.title),e.createElement("p",{className:"evaluation-description"},a.description),e.createElement("div",{className:"evaluation-details"},e.createElement("div",{className:"detail-item"},e.createElement("i",{className:"fas fa-clock"}),e.createElement("span",null,a.duration," minutos")),e.createElement("div",{className:"detail-item"},e.createElement("i",{className:"fas fa-question-circle"}),e.createElement("span",null,a.totalQuestions," preguntas")),e.createElement("div",{className:"detail-item"},e.createElement("i",{className:"fas fa-percentage"}),e.createElement("span",null,a.passingScore,"% mínimo"))),e.createElement("div",{className:"evaluation-tags"},a.tags.map((c,o)=>e.createElement("span",{key:o,className:"tag"},c))),(s==null?void 0:s.completed)&&e.createElement("div",{className:"evaluation-result"},e.createElement("div",{className:"result-score"},e.createElement("span",{className:"score-value",style:{color:h(s.score)}},s.score,"%"),e.createElement("span",{className:"score-label"},"Puntuación Final")),e.createElement("div",{className:"result-details"},e.createElement("div",{className:"result-item"},e.createElement("i",{className:"fas fa-check-circle"}),e.createElement("span",null,s.correctAnswers," respuestas correctas")),e.createElement("div",{className:"result-item"},e.createElement("i",{className:"fas fa-times-circle"}),e.createElement("span",null,s.incorrectAnswers," respuestas incorrectas")),e.createElement("div",{className:"result-item"},e.createElement("i",{className:"fas fa-calendar-check"}),e.createElement("span",null,"Completada el ",new Date(s.completedAt).toLocaleDateString())))),e.createElement("div",{className:"evaluation-status"},e.createElement("span",{className:"status-indicator",style:{backgroundColor:b(t)}}),e.createElement("span",{className:"status-label"},f(t))),e.createElement("button",{className:`start-button ${t==="completed"?"completed":""}`,onClick:()=>k(a.id)},t==="completed"?"Ver resultados":t==="in-progress"?"Continuar evaluación":"Comenzar evaluación")))})),!r&&e.createElement("div",{className:"login-prompt"},e.createElement("h2",null,"¿Listo para evaluarte?"),e.createElement("p",null,"Inicia sesión o crea una cuenta para comenzar tus evaluaciones y obtener certificados."),e.createElement("div",{className:"prompt-buttons"},e.createElement("button",{className:"login-button",onClick:()=>l("/login")},"Iniciar sesión"),e.createElement("button",{className:"register-button",onClick:()=>l("/register")},"Registrarse"))))};export{$ as default};
